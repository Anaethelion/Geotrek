{% extends "mapentity/base.html" %}
{% load i18n static field_verbose_name maps convert_tags %}

{% block nav-detail %}active{% endblock nav-detail %}

{% block mainpanel %}
    <div class="details-panel span7 {{ modelname }}">

    {% block detailspanel %}
        <h2>
            
            {% if object.structure %}
                <span class="badge badge-info">{{ object.structure }}</span>
            {% endif %}
            {{ object }}
            {% block extratitle %}{% endblock extratitle %}
            
            <div class="pull-right">
                {% if can_edit %}
                    <a class="btn btn-primary" href="{{ object.get_update_url }}"><i class="icon-pencil icon-white"></i>{% trans "Update" %}</a>
                {% endif %}
                <div class="btn-group">
                    {% block download %}
                    <a class="btn btn-mini" href="{{ object.get_document_url }}"><img src="{% static "paperclip/fileicons/odt.png" %}"/> {% trans "ODT" %}</a>
                    <a class="btn btn-mini" href="{% convert_url request object.get_document_url %}"><img src="{% static "paperclip/fileicons/pdf.png" %}"/> {% trans "PDF" %}</a>
                    {% endblock download %}
                </div>
            </div>
        </h2>
    {% endblock detailspanel %}

    {% block attachmentpanel %}
    <div class="file-attachment file-attachment-detail">
        <h3>{% trans "Attached files" %}</h3>

        {% with object=object can_delete_attachment=can_delete_attachment attachment_delete_next=object.get_detail_url %}
            {% include 'paperclip/details.html' %}
        {% endwith %}
    </div>
    {% endblock attachmentpanel %}

    </div><!-- span7 -->

    <div class="map-panel span5">
        {% block mappanel %}
        {% if object.geom %}
            {{ object|fieldmap:"geom" }}
        {% else %}
            {% trans "No map available for this object." %}
        {% endif %}
        {% endblock mappanel %}
    </div><!-- span5 -->

{% endblock mainpanel %}
