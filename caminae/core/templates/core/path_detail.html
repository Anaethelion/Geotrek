{% extends "core/base.html" %}
{% load i18n static leaflet_tags field_verbose_name maps %}


{% block extrahead %}
    {{ block.super }}
    <!-- extra-js-css -->
	<script type="text/javascript" src="{% static "js/jquery.sparkline.js" %}" />
{% endblock extrahead %}


{% block mainpanel %}
    <div class="span7">

    <h2>{{ path }}
        {% if can_edit %}
            <a class="btn btn-primary" href="{{ path.get_update_url }}">{% trans "Update" %}</a>
        {% else %}
            <span class="btn disabled">{% trans "Update" %}</span>
        {% endif %}
    </h2>
    
    <table class="table-striped table-bordered table">
        <tr>
            <th>{{ path|verbose:"valid" }}</th>
            <td>{{ path.valid|yesno:_("Yes,No") }}</td>
        </tr><tr>
            <th>{{ path|verbose:"name" }}</th>
            <td>{{ path.name|default:_("None") }}</td>
        </tr><tr>
            <th>{{ path|verbose:"comments" }}</th>
            <td>{{ path.comments|default:_("None")  }}</td>
        </tr><tr>
            <th>{{ path|verbose:"date_insert" }}</th>
            <td>{{ path.date_insert }}</td>
        </tr><tr>
            <th>{{ path|verbose:"date_update" }}</th>
            <td>{{ path.date_update }}</td>
        </tr><tr>
            <th>{{ path|verbose:"length" }}</th>
            <td>{{ path.length }}</td>
        </tr><tr>
            <th>{{ path|verbose:"ascent" }}</th>
            <td>{{ path.ascent }}</td>
        </tr><tr>
            <th>{{ path|verbose:"descent" }}</th>
            <td>{{ path.descent }}</td>
        </tr><tr>
            <th>{{ path|verbose:"min_elevation" }}</th>
            <td>{{ path.min_elevation }}</td>
        </tr><tr>
            <th>{{ path|verbose:"max_elevation" }}</th>
            <td>{{ path.max_elevation }}</td>
        </tr><tr>
            <th>{{ path|verbose:"trail" }}</th>
            <td>{{ path.trail|default:_("None") }}</td>
        </tr><tr>
            <th>{{ path|verbose:"datasource" }}</th>
            <td>{{ path.datasource|default:_("None") }}</td>
        </tr><tr>
            <th>{{ path|verbose:"stake" }}</th>
            <td>{{ path.stake|default:_("None") }}</td>
        </tr><tr>
            <th>{{ path|verbose:"usages" }}</th>
            <td>
                {% for usage in  path.usages.all %}
                    {% if forloop.first %}<ul>{% endif %}
                    <li> {{ usage }} </li>
                    {% if forloop.last %}</ul>{% endif %}
                {% empty %}
                    {% trans "None" %}
                {% endfor %}
            </td>
        </tr><tr>
            <th>{{ path|verbose:"networks" }}</th>
            <td>
                {% for network in  path.networks.all %}
                    {% if forloop.first %}<ul>{% endif %}
                    <li> {{ network }} </li>
                    {% if forloop.last %}</ul>{% endif %}
                {% empty %}
                    {% trans "None" %}
                {% endfor %}
            </td>
        </tr>
    </table>

    </div> <!-- span7 -->

    <div class="span4">
        {{ path|fieldmap:"geom" }}
    </div> <!-- span4 -->

    <div class="span7">
        <h2>{% trans "Altitude profile" %}</h2>
        <script> type="text/javascript">
			$(function() {
				$.getJSON("{% url core:path_profile path.pk %}", function(data) {
					$('.dynamicsparkline').sparkline(data.profile, {width: 400, height: 200});
				});
			});
		</script>
		<p>Altitude (m)</p>
		<div class="dynamicsparkline">Loading..</div>
	</div>

	

{% endblock mainpanel %}


